{"map":"{\"version\":3,\"sources\":[\"/Users/hubertposkrobko/Desktop/PB/Semestr4/SZKIELETY/Projekcik/frontend/src/components/SpinPage.js\",\"/Users/hubertposkrobko/Desktop/PB/Semestr4/SZKIELETY/Projekcik/frontend/src/index.js\",\"/Users/hubertposkrobko/Desktop/PB/Semestr4/SZKIELETY/Projekcik/frontend/node_modules/url-loader/dist/cjs.js??ref--6-oneOf-0!/Users/hubertposkrobko/Desktop/PB/Semestr4/SZKIELETY/Projekcik/frontend/src/assets/images/karol.jpeg\"],\"names\":[\"prizes\",\"getCookie\",\"name\",\"cookieValue\",\"document\",\"cookie\",\"cookies\",\"split\",\"i\",\"length\",\"trim\",\"substring\",\"decodeURIComponent\",\"SpinPage\",\"spinning\",\"setSpinning\",\"useState\",\"result\",\"setResult\",\"roulettePosition\",\"setRoulettePosition\",\"karole\",\"setKarole\",\"karoleVisible\",\"setKaroleVisible\",\"userAuthenticated\",\"setUserAuthenticated\",\"React\",\"createElement\",\"className\",\"style\",\"transform\",\"concat\",\"Array\",\"from\",\"map\",\"_\",\"loop\",\"prize\",\"hue\",\"key\",\"backgroundColor\",\"font\",\"onClick\",\"async\",\"response\",\"fetch\",\"method\",\"headers\",\"Content-Type\",\"X-CSRFToken\",\"status\",\"json\",\"prizeIndex\",\"indexOf\",\"itemWidth\",\"extraLoops\",\"targetPosition\",\"setTimeout\",\"karolki\",\"id\",\"top\",\"Math\",\"random\",\"left\",\"delay\",\"error\",\"console\",\"disabled\",\"k\",\"src\",\"karol\",\"alt\",\"animationDelay\",\"ReactDOM\",\"createRoot\",\"getElementById\",\"render\",\"StrictMode\",\"module\",\"exports\",\"__webpack_require__\",\"p\"],\"mappings\":\"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\",\"sourcesContent\":[\"import React, { useState, useEffect } from 'react';\\nimport '../assets/styles/spinpage.css';\\nimport karol from '../assets/images/karol.jpeg';\\n\\nconst prizes = [0, 2, 5, 10, 20];\\n\\nfunction getCookie(name) {\\n  let cookieValue = null;\\n  if (document.cookie && document.cookie !== '') {\\n    const cookies = document.cookie.split(';');\\n    for (let i = 0; i < cookies.length; i++) {\\n      const cookie = cookies[i].trim();\\n      if (cookie.substring(0, name.length + 1) === name + '=') {\\n        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\\n        break;\\n      }\\n    }\\n  }\\n  return cookieValue;\\n}\\n\\nfunction SpinPage() {\\n  const [spinning, setSpinning] = useState(false);\\n  const [result, setResult] = useState(null);\\n  const [roulettePosition, setRoulettePosition] = useState(0);\\n  const [karole, setKarole] = useState([]);\\n  const [karoleVisible, setKaroleVisible] = useState(true);\\n  const [userAuthenticated, setUserAuthenticated] = useState(true);\\n\\n  const spin = async () => {\\n    if (spinning) return;\\n\\n    setSpinning(true);\\n\\n    try {\\n      const response = await fetch('/api/spin/', {\\n        method: 'POST',\\n        headers: {\\n          'Content-Type': 'application/json',\\n          'X-CSRFToken': getCookie('csrftoken'),\\n        },\\n      });\\n\\n      if (response.status === 401 || response.status === 403) {\\n        setUserAuthenticated(false);\\n        setResult(null);\\n        setSpinning(false);\\n        return;\\n      }\\n      if (response.status === 409) {\\n        setUserAuthenticated(true);\\n        setResult('already');\\n        setSpinning(false);\\n        return;\\n      }\\n      setUserAuthenticated(true);\\n\\n      const data = await response.json();\\n      const prize = data.result;\\n\\n      const prizeIndex = prizes.indexOf(prize);\\n      const itemWidth = 120;\\n      const extraLoops = 4;\\n      const totalItems = prizes.length * extraLoops;\\n      const targetPosition = (totalItems + prizeIndex) * itemWidth;\\n\\n      setRoulettePosition(0);\\n\\n      setTimeout(() => {\\n        setRoulettePosition(-targetPosition);\\n      }, 50);\\n\\n      setTimeout(() => {\\n        setResult(prize);\\n        setSpinning(false);\\n\\n        const karolki = Array.from({ length: 15 }, (_, i) => ({\\n          id: i,\\n          top: Math.random() * 100 + '%',\\n          left: Math.random() * 100 + '%',\\n          delay: Math.random() * 2,\\n        }));\\n        setKarole(karolki);\\n        setKaroleVisible(true);\\n\\n        setTimeout(() => {\\n          setKaroleVisible(false);\\n          setTimeout(() => setKarole([]), 700);\\n        }, 3500);\\n      }, 5000);\\n    } catch (error) {\\n      console.error('Błąd podczas spinowania:', error);\\n      setSpinning(false);\\n    }\\n  };\\n\\n  return (\\n    <div className=\\\"container text-center spin-page-container\\\">\\n      <h2>CODZIENNY BONUS</h2>\\n\\n      <div className=\\\"roulette-container\\\">\\n        <div\\n          className=\\\"roulette\\\"\\n          style={{ transform: `translateX(${roulettePosition}px)` }}\\n        >\\n          {Array.from({ length: 7 }).map((_, loop) =>\\n            prizes.map((prize, i) => {\\n              const globalIndex = loop * prizes.length + i;\\n              const hue = (globalIndex * 47) % 360; // ładnie się rozkłada\\n              return (\\n                <div\\n                  className=\\\"prize-item\\\"\\n                  key={`${loop}-${i}`}\\n                  style={{\\n                    backgroundColor: `hsl(${hue}, 85%, 70%)`,\\n                    font: `solid black`\\n                  }}\\n                >\\n                  {prize} zł\\n                </div>\\n              );\\n            })\\n          )}\\n        </div>\\n        <div className=\\\"indicator\\\">▼</div>\\n      </div>\\n\\n      {result === 'already' ? (\\n        <div className=\\\"alert alert-warning mt-4\\\">\\n          Już dziś kręciłeś! Wróć jutro po więcej szczęścia.\\n        </div>\\n      ) : !userAuthenticated ? (\\n        <div className=\\\"alert alert-danger mt-4\\\">\\n          Musisz być zalogowany, aby skorzystać z tej wspaniałej funkcjonalności.\\n        </div>\\n      ) : (\\n        <button className=\\\"btn btn-primary mt-4\\\" onClick={spin} disabled={spinning}>\\n          SPIN\\n        </button>\\n      )}\\n\\n      {!spinning && result !== null && result !== 'already' && (\\n        result === 0 ? (\\n          <div className=\\\"alert alert-warning mt-3\\\">\\n            Nic nie wygrałeś...\\n          </div>\\n        ) : (\\n          <div className=\\\"alert alert-success mt-3\\\">\\n            Gratulacje! Wylosowałeś {result} zł!!!\\n          </div>\\n        )\\n      )}\\n\\n      {karole.map((k) => (\\n        <img\\n          key={k.id}\\n          src={karol}\\n          alt=\\\"karol\\\"\\n          className={`karol-float-global ${karoleVisible ? 'show' : 'hide'}`}\\n          style={{\\n            top: k.top,\\n            left: k.left,\\n            animationDelay: `${k.delay}s`,\\n          }}\\n        />\\n      ))}\\n    </div>\\n  );\\n}\\n\\nexport default SpinPage;\",\"import React from 'react';\\nimport ReactDOM from 'react-dom/client';\\nimport SpinPage from './components/SpinPage';\\n\\nconst root = ReactDOM.createRoot(document.getElementById('root'));\\nroot.render(\\n  <React.StrictMode>\\n    <SpinPage />\\n  </React.StrictMode>\\n);\",\"module.exports = __webpack_public_path__ + \\\"static/media/karol.ef1dc56d.jpeg\\\";\"]}","code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,t,a){},15:function(e,t,a){\"use strict\";a.r(t);var n=a(0),o=a.n(n),c=a(3),r=a.n(c),l=(a(14),a(4)),s=a.n(l);const i=[0,2,5,10,20];function m(e){let t=null;if(document.cookie&&\"\"!==document.cookie){const a=document.cookie.split(\";\");for(let n=0;n<a.length;n++){const o=a[n].trim();if(o.substring(0,e.length+1)===e+\"=\"){t=decodeURIComponent(o.substring(e.length+1));break}}}return t}var u=function(){const[e,t]=Object(n.useState)(!1),[a,c]=Object(n.useState)(null),[r,l]=Object(n.useState)(0),[u,d]=Object(n.useState)([]),[p,f]=Object(n.useState)(!0),[y,b]=Object(n.useState)(!0);return o.a.createElement(\"div\",{className:\"container text-center spin-page-container\"},o.a.createElement(\"h2\",null,\"CODZIENNY BONUS\"),o.a.createElement(\"div\",{className:\"roulette-container\"},o.a.createElement(\"div\",{className:\"roulette\",style:{transform:\"translateX(\".concat(r,\"px)\")}},Array.from({length:7}).map((e,t)=>i.map((e,a)=>{const n=47*(t*i.length+a)%360;return o.a.createElement(\"div\",{className:\"prize-item\",key:\"\".concat(t,\"-\").concat(a),style:{backgroundColor:\"hsl(\".concat(n,\", 85%, 70%)\"),font:\"solid black\"}},e,\" z\\u0142\")}))),o.a.createElement(\"div\",{className:\"indicator\"},\"\\u25bc\")),\"already\"===a?o.a.createElement(\"div\",{className:\"alert alert-warning mt-4\"},\"Ju\\u017c dzi\\u015b kr\\u0119ci\\u0142e\\u015b! Wr\\xf3\\u0107 jutro po wi\\u0119cej szcz\\u0119\\u015bcia.\"):y?o.a.createElement(\"button\",{className:\"btn btn-primary mt-4\",onClick:async()=>{if(!e){t(!0);try{const e=await fetch(\"/api/spin/\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",\"X-CSRFToken\":m(\"csrftoken\")}});if(401===e.status||403===e.status)return b(!1),c(null),void t(!1);if(409===e.status)return b(!0),c(\"already\"),void t(!1);b(!0);const n=(await e.json()).result,o=i.indexOf(n),r=120,s=4,u=(i.length*s+o)*r;l(0),setTimeout(()=>{l(-u)},50),setTimeout(()=>{c(n),t(!1);const e=Array.from({length:15},(e,t)=>({id:t,top:100*Math.random()+\"%\",left:100*Math.random()+\"%\",delay:2*Math.random()}));d(e),f(!0),setTimeout(()=>{f(!1),setTimeout(()=>d([]),700)},3500)},5e3)}catch(a){console.error(\"B\\u0142\\u0105d podczas spinowania:\",a),t(!1)}}},disabled:e},\"SPIN\"):o.a.createElement(\"div\",{className:\"alert alert-danger mt-4\"},\"Musisz by\\u0107 zalogowany, aby skorzysta\\u0107 z tej wspania\\u0142ej funkcjonalno\\u015bci.\"),!e&&null!==a&&\"already\"!==a&&(0===a?o.a.createElement(\"div\",{className:\"alert alert-warning mt-3\"},\"Nic nie wygra\\u0142e\\u015b...\"):o.a.createElement(\"div\",{className:\"alert alert-success mt-3\"},\"Gratulacje! Wylosowa\\u0142e\\u015b \",a,\" z\\u0142!!!\")),u.map(e=>o.a.createElement(\"img\",{key:e.id,src:s.a,alt:\"karol\",className:\"karol-float-global \".concat(p?\"show\":\"hide\"),style:{top:e.top,left:e.left,animationDelay:\"\".concat(e.delay,\"s\")}})))};r.a.createRoot(document.getElementById(\"root\")).render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(u,null)))},4:function(e,t,a){e.exports=a.p+\"static/media/karol.ef1dc56d.jpeg\"},5:function(e,t,a){e.exports=a(15)}},[[5,1,2]]]);","extractedComments":[]}