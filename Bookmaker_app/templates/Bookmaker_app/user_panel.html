{% extends 'Bookmaker_app/base.html' %}
{% load static %}

{% block content %}
<div class="container mt-5 pt-5">
    <div class="custom-card p-4 themed-panel">
        <h1 class="mb-4 text-center">Witaj, {{ user.username }}!</h1>
        <h2 class="mb-3 text-center">üí∞ Saldo: {{ saldo }} z≈Ç</h2>

        <div class="d-flex flex-column align-items-center mb-4 gap-2">
            <a href="{% url 'wplata' %}" class="btn custom-wplata w-50 py-2 fs-6 d-flex justify-content-center align-items-center">
                üí∏ <span class="ms-2">Wp≈Çata</span>
            </a>
            <a href="{% url 'wyplata' %}" class="btn custom-wyplata w-50 py-2 fs-6 d-flex justify-content-center align-items-center">
                üèß <span class="ms-2">Wyp≈Çata</span>
            </a>
        </div>
        <style>
.custom-wplata {
  background-color: #b6f2c0;
  color: #000;
  border: 2px solid #6fdd8b;
  transition: background-color 0.3s, color 0.3s;
}
.custom-wplata:hover {
  background-color: #6fdd8b !important;
  color: #fff !important;
}

.custom-wyplata {
  background-color: #f8c2c2;
  color: #000;
  border: 2px solid #f39090;
  transition: background-color 0.3s, color 0.3s;
}
.custom-wyplata:hover {
  background-color: #f39090 !important;
  color: #fff !important;
}
</style>

        <div class="mb-5">
            <h3 class="mb-3">üéØ Twoje zak≈Çady:</h3>
            <ul class="list-group" id="zaklady-list">
                {% for zaklad in zaklady %}
                    <li class="list-group-item themed-panel border-light mb-2 {% if forloop.counter > 5 %}d-none extra-zaklad{% endif %}">
                        <div class="small" style="color: var(--text-color);">
                            <strong>Stawka:</strong> {{ zaklad.wartosc }} z≈Ç<br>
                            <strong>Status:</strong> {{ zaklad.wynik }}<br>
                            <strong>Data:</strong> {{ zaklad.stworzono|date:"Y-m-d H:i" }}
{#                            <strong>Potencjalna wygrana:</strong> {{ zaklad. }}#}
                        </div>
                    </li>
                {% empty %}
                    <li class="list-group-item themed-panel border-light">Nie masz ≈ºadnych zak≈Çad√≥w.</li>
                {% endfor %}
            </ul>
            {% if zaklady|length > 5 %}
                <div class="text-center mt-2">
                    <button id="zaklady-btn" class="btn btn-sm btn-outline-light" onclick="toggleZaklady()">Poka≈º wiƒôcej</button>
                </div>
            {% endif %}
        </div>

        <div>
            <h3 class="mb-3">üìú Twoje transakcje:</h3>
            <ul class="list-group" id="transakcje-list">
                {% for transakcja in transakcje %}
                    <li class="list-group-item themed-panel border-light mb-2 {% if forloop.counter > 5 %}d-none extra-transakcja{% endif %}">
                        <div class="small" style="color: var(--text-color);">
                            <strong>{{ transakcja.typ }}</strong> ‚Äì {{ transakcja.wartosc }} z≈Ç<br>
                            <strong>Opis:</strong> {{ transakcja.opis }}<br>
                            <strong>Data:</strong> {{ transakcja.stworzono|date:"Y-m-d H:i" }}
                        </div>
                    </li>
                {% empty %}
                    <li class="list-group-item themed-panel border-light">Brak transakcji.</li>
                {% endfor %}
            </ul>
            {% if transakcje|length > 5 %}
                <div class="text-center mt-2">
                    <button id="transakcje-btn" class="btn btn-sm btn-outline-light" onclick="toggleTransakcje()">Poka≈º wiƒôcej</button>
                </div>
            {% endif %}
        </div>
    </div>
</div>
<script>
function toggleZaklady() {
    const extras = document.querySelectorAll('.extra-zaklad');
    const btn = document.getElementById('zaklady-btn');
    const isHidden = extras[0]?.classList.contains('d-none');

    extras.forEach(e => e.classList.toggle('d-none'));
    btn.textContent = isHidden ? "Zwi≈Ñ" : "Poka≈º wiƒôcej";
}
function toggleTransakcje() {
    const extras = document.querySelectorAll('.extra-transakcja');
    const btn = document.getElementById('transakcje-btn');
    const isHidden = extras[0]?.classList.contains('d-none');

    extras.forEach(e => e.classList.toggle('d-none'));
    btn.textContent = isHidden ? "Zwi≈Ñ" : "Poka≈º wiƒôcej";
}
</script>
{% endblock %}